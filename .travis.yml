---
language: node_js

node_js:
  - node
  - 12
  - 11
  - 10

sudo: false

stages:
  - lint
  - test
  - name: deploy
    if: branch = master

install:
  - npm ci

jobs:
  include:
    - stage: lint
      script: npm run lint
    - stage: deploy
      script:
        - npm run compile
        - npm publish
      deploy:
        provider: npm
        email: eric.s.crosson@utexas.edu
        api_key:
          secure: bNqMN2FVRLVMH5W7UZi5ydJEUFNbP2PoumkxsWIpehuwosp1XIQd1zJ0hcApG1Dv9ytzR6PHKaQNZuHIR6CcUEcDE0m2GxejPbHcjuSEqbzLEHTsSd3281oRawSZ4r/yNaijnYG048peJhSpctAAAkcAz7E1FHKXe1u3w2gDR11MixlYW58X40lAaM4JRZS8DQ2LmljfC4yOvnQE8nQiYEyAnaTq5QhUC9BOrhrAhIPTmBiToNBg3UzV+O+yaiyblHdJNxz7NmTrGGS4E320JNpVY1AfhXPqLBKb0Rp+YhxBuOQ+rpc5wv6S7EBzseIrrIG+Lw2bSTPIwkDiJXIxe+K5m50ZItTFnL7b1SM8Er73llQ5+dE96mB/dtapw4cX2BI4DBBnVaeK/v2l5ziU149YCUS4WcTEGe4dVpUo+2FsgTQSC6fYiNYdG0RA4J2I/Ouw4kam7yk9v03LpVO6QnImtTwHuOuuR45oqmDk3Jpd6bfMfPt8nuo9EiEpPWVgPX1sTisvwwFAqCS2p2yYWZLOWrAAp5XvN/zKA2ASEAV8sietDicIQfi8F4TKEJw4iIK8u9LWxXLLpcmgR1oWbDT/Ro/bYOkEnapDpjbr7y6vNF7okBst5OqXzSpJ8HDX0L2QYMH7vuLCQwWbYheGCAXJL8st885UqfLzc3mndpc=
        on:
          tags: true

after_success:
  - npm run coverage
